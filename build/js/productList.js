var l=(h,e,t)=>new Promise((r,s)=>{var a=i=>{try{c(t.next(i))}catch(o){s(o)}},n=i=>{try{c(t.throw(i))}catch(o){s(o)}},c=i=>i.done?r(i.value):Promise.resolve(i.value).then(a,n);c((t=t.apply(h,e)).next())});import{renderListWithTemplate as m}from"./utils.js";export default class u{constructor(e,t,r){this.category=e,this.ExternalServices=t,this.listElement=r,this.products={},this.sortKey="",this.selector=""}init(e,t){return l(this,null,function*(){this.sortKey=t,this.products=yield this.ExternalServices.getData(this.category),this.selector=e,this.sortList(this.sortKey),this.renderList(this.products,e,this.listElement,this.category)})}filterProducts(e,t){return l(this,null,function*(){return e.filter(r=>t(r))})}sortList(e){switch(e){case"name":this.products.sort((t,r)=>t.NameWithoutBrand.localeCompare(r.NameWithoutBrand));break;case"price":this.products.sort((t,r)=>t.ListPrice>=r.ListPrice?-1:1);break}}prepareTemplate(e,t,r){const s=e,a=s.querySelector("a"),n=s.querySelector("img"),c=s.querySelector(".card__brand"),i=s.querySelector(".card__name"),o=s.querySelector(".product-card__price");return a.href=a.href+t.Id+`&category=${r}`,n.src=t.Images.PrimarySmall,n.alt=t.Name,c.textContent=t.Name,i.textContent=t.NameWithoutBrand,o.textContent=o.textContent+t.ListPrice,s}renderList(e,t,r,s){const a=document.querySelector(t);m(a,r,e,s,this.prepareTemplate)}searchProduct(e){const t=this.products.filter(r=>r.Name.toLowerCase().includes(e.toLowerCase()));this.renderList(t,this.selector,this.listElement,this.category)}}
