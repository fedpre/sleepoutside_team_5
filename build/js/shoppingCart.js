var i=Object.assign,m=(y,e,t)=>new Promise((r,o)=>{var a=n=>{try{c(t.next(n))}catch(s){o(s)}},l=n=>{try{c(t.throw(n))}catch(s){o(s)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(a,l);c((t=t.apply(y,e)).next())});import{getLocalStorage as d,setLocalStorage as u,renderListWithTemplate as I}from"./utils.js";export default class g{constructor(e){this.cartList=[],this.listElement=e}init(e){return m(this,null,function*(){this.cartList=yield this.getCartContent(),this.renderCartItems(this.cartList,e,this.listElement)})}getCartContent(){const e=d("so-cart");return e==null?[]:e}prepareTemplate(e,t){const r=e,o=r.querySelector(".prod-img");o.src=t.Images.PrimaryMedium,t.alt=t.Name;const a=r.querySelector(".card__name");a.innerHTML=t.Name;const l=r.querySelector(".material-symbols-outlined");l.setAttribute("data-id",t.Id);const c=r.querySelector(".cart-card__color");c.innerHTML=t.Colors[0].ColorName;const n=r.querySelector(".qt-num");n.innerHTML=t.quantity;const s=r.querySelector(".cart-card__addQuantity");s.setAttribute("data-id",t.Id);const p=r.querySelector(".cart-card__removeQuantity");p.setAttribute("data-id",t.Id);const q=r.querySelector(".cart-card__price");return q.innerHTML=t.FinalPrice,r}renderCartItems(e,t,r){const o=document.querySelector(t);let a;I(o,r,e,a,this.prepareTemplate)}removeItem(e){e.preventDefault();const t=e.target.dataset.id;if(d("so-cart")!==null){const r=d("so-cart"),o=r.filter(a=>a.Id!==t);u("so-cart",o),window.location.reload()}}addQuantity(e){const t=e.target.dataset.id,r=d("so-cart"),o=r.map(a=>a.Id===t?i(i({},a),{quantity:a.quantity+1}):a);u("so-cart",o),window.location.reload()}removeQuantity(e){const t=e.target.dataset.id,r=d("so-cart"),o=r.map(a=>a.Id===t?i(i({},a),{quantity:a.quantity-1}):a);u("so-cart",o),window.location.reload()}}
